const cacheName = "cache-v3";
const precachedResources = ["./img/instructions/SwipeReminder.png",
"./img/instructions/SwipeVisualInstructions.png",
"./img/character/Duplicator.png",
"./img/character/IceSkater.png",
"./img/character/Student.png",
"./img/character/Angel.png",
"./img/character/Pirate.json",
"./img/character/Bunny.json",
"./img/character/Gentleman.json",
"./img/character/Student.json",
"./img/character/Pirate.png",
"./img/character/Angel.json",
"./img/character/Shadow.png",
"./img/character/Child.png",
"./img/character/Lizard.json",
"./img/character/Child.json",
"./img/character/Ghost.png",
"./img/character/Lizard.png",
"./img/character/Duplicator.json",
"./img/character/Runner.png",
"./img/character/Ghost.json",
"./img/character/IceSkater.json",
"./img/character/closeup/student/sittingAngry.png",
"./img/character/closeup/student/sittingThinking.png",
"./img/character/closeup/student/sittingExcited.png",
"./img/character/closeup/student/sittingTalking.png",
"./img/character/closeup/student/jumpingForJoy.png",
"./img/character/closeup/student/sittingThinkingHard.png",
"./img/character/closeup/student/sittingReading.png",
"./img/character/closeup/student/sittingHappy.png",
"./img/character/Climber.json",
"./img/character/Gentleman.png",
"./img/character/Bunny.png",
"./img/character/Skier.json",
"./img/character/Skater.json",
"./img/character/Runner.json",
"./img/character/JackOLantern.json",
"./img/character/Ninja.png",
"./img/character/JackOLantern.png",
"./img/character/Pastafarian.json",
"./img/character/Skater.png",
"./img/character/Skier.png",
"./img/character/Climber.png",
"./img/character/Pastafarian.png",
"./img/character/Ninja.json",
"./img/editor/Ellipsis.png",
"./img/editor/DeleteLevelIcon.png",
"./img/editor/ZoomInButton.png",
"./img/editor/SelectedColor.png",
"./img/editor/ZoomOutButton.png",
"./img/editor/ScrollArrow.png",
"./img/editor/Drag.png",
"./img/editor/EraseIcon.png",
"./img/singledpi/RolledBoxIcon.png",
"./img/singledpi/BoxIcon.png",
"./img/singledpi/texture/Box.png",
"./img/singledpi/texture/RGSkybox0.png",
"./img/singledpi/texture/Skybox5.png",
"./img/singledpi/texture/Skybox0.png",
"./img/singledpi/texture/RuinedTile.png",
"./img/singledpi/texture/Plus.png",
"./img/singledpi/texture/RGSkybox2.png",
"./img/singledpi/texture/MapWithTeapot.png",
"./img/singledpi/texture/CrumblingTile.png",
"./img/singledpi/texture/WarningStripes.png",
"./img/singledpi/texture/RGSkybox3.png",
"./img/singledpi/texture/Skybox1.png",
"./img/singledpi/texture/Balloon.png",
"./img/singledpi/texture/RGSkybox5.png",
"./img/singledpi/texture/CandyCorn.png",
"./img/singledpi/texture/Skybox2.png",
"./img/singledpi/texture/Candy.png",
"./img/singledpi/texture/IceTile.png",
"./img/singledpi/texture/Acceleration.png",
"./img/singledpi/texture/Skybox3.png",
"./img/singledpi/texture/Skybox4.png",
"./img/singledpi/texture/Wormhole.png",
"./img/singledpi/texture/Battery.png",
"./img/singledpi/texture/RGSkybox4.png",
"./img/singledpi/texture/Arrow.png",
"./img/singledpi/texture/RGSkybox1.png",
"./img/cutscene/Batteries.png",
"./img/cutscene/OfCourse.png",
"./img/cutscene/PlanetStolen.png",
"./img/cutscene/CrossingTheGap.png",
"./img/cutscene/Wait.png",
"./img/cutscene/ItsJustYou.png",
"./img/cutscene/TheNextBigThing.png",
"./img/cutscene/Boring.png",
"./img/cutscene/SocraticMethod.png",
"./img/cutscene/Fame.png",
"./img/cutscene/ABCD.png",
"./img/cutscene/CantWait.png",
"./img/cutscene/SomethingWeird.png",
"./img/cutscene/TellAFriend.png",
"./img/cutscene/BoatRide.png",
"./img/cutscene/TrainRide/Spritesheet.png",
"./img/cutscene/TrainRide/Balloon.png",
"./img/cutscene/TrainRide/Spritesheet.json",
"./img/cutscene/MorningHypothesis.png",
"./img/cutscene/WormholeInSight.png",
"./img/cutscene/JoinUs.png",
"./img/cutscene/StopSolvingProblems.png",
"./img/cutscene/Affliction.png",
"./img/cutscene/TheGap.png",
"./img/cutscene/ComingThrough.png",
"./img/cutscene/Protip.png",
"./img/cutscene/Conspiracy.png",
"./img/cutscene/SelfAssembly.png",
"./img/cutscene/Superpowers.png",
"./img/cutscene/FriendlyGreeting.png",
"./img/cutscene/HeavySleeper.png",
"./img/cutscene/Truancy.png",
"./img/cutscene/Candy/Balloon.png",
"./img/cutscene/GoldMedal.png",
"./img/cutscene/MyTurn.png",
"./img/cutscene/DontQuestionIt.png",
"./img/cutscene/DontKnockIt.png",
"./img/cutscene/LightningStrikesTwice.png",
"./img/cutscene/Inflation.png",
"./img/cutscene/AngelVsBunny.png",
"./img/cutscene/StudentTeacher.png",
"./img/cutscene/PlanetMissing.png",
"./img/cutscene/River.png",
"./img/cutscene/Candy.png",
"./img/cutscene/Naming.png",
"./img/cutscene/GrandOpening.png",
"./img/cutscene/ChangeTheSubject.png",
"./img/cutscene/Orbits.png",
"./img/cutscene/YouThink.png",
"./img/cutscene/ThanksForPlaytesting.png",
"./img/cutscene/Revision.png",
"./img/cutscene/Sneaking.png",
"./img/cutscene/Obvious.png",
"./img/cutscene/FourthCondiment.png",
"./img/cutscene/Insanity.png",
"./img/cutscene/Discoveries.png",
"./img/cutscene/Indecision.png",
"./img/cutscene/StandardsToUphold.png",
"./img/cutscene/NiceToMeetYou.png",
"./img/cutscene/Teapot.png",
"./img/cutscene/Conspiracy/Student.png",
"./img/cutscene/Conspiracy/Angel.png",
"./img/cutscene/Conspiracy/Runner.png",
"./img/cutscene/Conspiracy/Gentleman.png",
"./img/cutscene/Conspiracy/Skater.png",
"./img/cutscene/Conspiracy/Pastafarian.png",
"./img/cutscene/TwoMonthWait.png",
"./img/cutscene/LeaveItHere.png",
"./img/map/MovableBoxesIcon.png",
"./img/map/Box.png",
"./img/map/Bridge.png",
"./img/map/Snowflakes.png",
"./img/map/PlanetoidBelt1.png",
"./img/map/MapIconFlat.png",
"./img/map/Planet.png",
"./img/map/MapIcon.png",
"./img/map/SpeechBubbles.png",
"./img/map/DerpRunner.png",
"./img/map/MapMask.png",
"./img/map/Wormhole.png",
"./img/map/Battery.png",
"./img/map/PlanetoidBelt0.png",
"./img/map/Teapot.png",
"./img/map/MovableBoxIcon.png",
"./img/map/Infinity.png",
"./img/menu/Leaderboards.png",
"./img/menu/PlayFabHeader.png",
"./img/menu/CutsceneIcon.png",
"./img/menu/Shop.png",
"./img/menu/LittleAlchemistPromoComplete.png",
"./img/menu/QualityIcon.png",
"./img/menu/CheckMark.png",
"./img/menu/TyrantPromoComplete.png",
"./img/menu/StatsButton.png",
"./img/menu/PlayGame.png",
"./img/menu/Run3.png",
"./img/menu/GooglePlayGames.png",
"./img/menu/TyrantPromoButton.png",
"./img/menu/characterselection/Duplicator.png",
"./img/menu/characterselection/GentlemanFront.png",
"./img/menu/characterselection/DuplicatorFront.png",
"./img/menu/characterselection/IceSkater.png",
"./img/menu/characterselection/Student.png",
"./img/menu/characterselection/Angel.png",
"./img/menu/characterselection/StudentFront.png",
"./img/menu/characterselection/Pirate.png",
"./img/menu/characterselection/SkierFront.png",
"./img/menu/characterselection/RandomFront.png",
"./img/menu/characterselection/Random.png",
"./img/menu/characterselection/Child.png",
"./img/menu/characterselection/PastafarianFront.png",
"./img/menu/characterselection/JackOLanternFront.png",
"./img/menu/characterselection/LizardFront.png",
"./img/menu/characterselection/Ghost.png",
"./img/menu/characterselection/IceSkaterFront.png",
"./img/menu/characterselection/Lizard.png",
"./img/menu/characterselection/Runner.png",
"./img/menu/characterselection/Gentleman.png",
"./img/menu/characterselection/Bunny.png",
"./img/menu/characterselection/AngelFront.png",
"./img/menu/characterselection/SleepingCharacterOverlay.png",
"./img/menu/characterselection/GhostFront.png",
"./img/menu/characterselection/Ninja.png",
"./img/menu/characterselection/SkaterFront.png",
"./img/menu/characterselection/BunnyFront.png",
"./img/menu/characterselection/JackOLantern.png",
"./img/menu/characterselection/Skater.png",
"./img/menu/characterselection/Skier.png",
"./img/menu/characterselection/Climber.png",
"./img/menu/characterselection/LizardFrontSleepy.png",
"./img/menu/characterselection/Pastafarian.png",
"./img/menu/characterselection/RunnerFront.png",
"./img/menu/characterselection/LockedCharacterOverlay.png",
"./img/menu/characterselection/NinjaFront.png",
"./img/menu/characterselection/ChildFront.png",
"./img/menu/characterselection/PirateFront.png",
"./img/menu/PlayFabButton.png",
"./img/menu/EditIcon.png",
"./img/menu/Run.png",
"./img/menu/KongPlus.png",
"./img/menu/GooglePlay.png",
"./img/menu/AppStore.png",
"./img/menu/holiday/Egg.png",
"./img/menu/holiday/Present.png",
"./img/menu/holiday/CandyCorn.png",
"./img/menu/GearIcon.png",
"./img/menu/TyrantIcon.png",
"./img/menu/CreditsIcon.png",
"./img/menu/GooglePlayLeaderboards.png",
"./img/menu/CloseWindowIcon.png",
"./img/menu/Achievements.png",
"./img/menu/KongregateButton.png",
"./img/menu/LittleAlchemistPromoButton.png",
"./img/menu/LittleAlchemistSplash.png",
"./img/menu/ScrollIndicator.png",
"./img/options/ErrorIcon.png",
"./img/options/BackLevelIcon.png",
"./img/options/MusicIcon.png",
"./img/options/SkipLevelIcon.png",
"./img/options/UnpauseIcon.png",
"./img/options/SoundOffIcon.png",
"./img/options/LargePauseIcon.png",
"./img/options/PauseIcon.png",
"./img/options/HomeIcon.png",
"./img/options/MusicOffIcon.png",
"./img/options/SoundIcon.png",
"./img/currency/MediumPile.png",
"./img/currency/SmallPile.png",
"./img/currency/LargePile.png",
"./img/currency/HugePile.png",
"./img/controls/ArrowCircleButton.png",
"./img/achievement/WhereThePowerCellsAre.png",
"./img/achievement/UnlimitedEndurance.png",
"./img/achievement/KeepItSimple.png",
"./img/achievement/AJourneyOf1000LightYears.png",
"./img/achievement/ViolationOfCommonSense.png",
"./img/achievement/ThoroughlyLost.png",
"./img/achievement/SavedByHisNoodlyLight.png",
"./img/achievement/NarrowFocus.png",
"./img/achievement/MemoryTest.png",
"./img/achievement/LivingSuperball.png",
"./img/achievement/Crown.png",
"./img/achievement/AGlimpseOfNewPlaces.png",
"./img/achievement/RampingUp.png",
"./img/achievement/FigureSkater.png",
"./img/achievement/BoldlyGone.png",
"./img/achievement/TheLazyWay.png",
"./img/achievement/ABreathOfFreshNothing.png",
"./img/achievement/JustBeingThorough.png",
"./img/achievement/SlippingAndSlidingToVictory.png",
"./img/achievement/ComingFullCircle.png",
"./img/achievement/IsntThatCheating.png",
"./img/achievement/WindSailor.png",
"./img/achievement/PlanningMakesPerfect.png",
"./img/achievement/WellGrounded.png",
"./img/achievement/GalacticVandalism.png",
"./img/achievement/TheConscientiousLizard.png",
"./img/achievement/TetrahedronEnthusiast.png",
"./img/achievement/RightIsWrong.png",
"./img/ads/Spinner.png",
"./font/COMFORTAA-BOLD.woff",
"./font/PERMANENTMARKER.woff",
"./font/Comfortaa.woff",
"./font/PERMANENTMARKER.TTF",
"./font/Comfortaa.sfd",
"./Run3.js",
"./music/TravelTheGalaxy.ogg",
"./music/LeaveTheSolarSystem.ogg",
"./music/Tone.ogg",
"./music/desktop.ini",
"./music/UnsafeSpeeds.ogg",
"./music/CrumblingWalls.ogg",
"./music/TheVoid.ogg",
"./music/WormholeToSomewhere.ogg",
"./index.html",
"./model/terrain.png",
"./model/terrain.3ds",
"./model/planet2.png",
"./model/planet5.png",
"./model/planet1.png",
"./model/battery.obj",
"./model/planet0.png",
"./model/battery.png",
"./model/planet4.png",
"./model/planet6.png",
"./model/planet3.png",
"./model/terrain.obj",
"./text/BuildNumber.txt",
"./text/content/content.json",
"./text/content/localContent.json",
"./text/content/autoContent.json",
"./text/content/infinite/infiniteAchieve.json",
"./text/content/explore/onwards1.json",
"./text/content/explore/homewards0.json",
"./text/content/explore/homeAchieve.json",
"./text/content/explore/earlyAchieve.json",
"./text/content/explore/homeImage.json",
"./text/content/explore/onwards0.json",
"./text/content/explore/dialog/gentleman.json",
"./text/content/explore/dialog/river.json",
"./text/content/explore/homewards1.json",
"./text/content/explore/early0.json",
"./text/content/explore/homeAchieve1.json",
"./text/content/explore/onwardsAchieve.json",
"./text/content/explore/childAchieve.json",
"./text/InfiniteLevels.txt",
"./text/MapContents.json",
"./text/wall/TellAFriend.txt",
"./text/wall/Affliction.txt",
"./text/ExploreLevels.txt",
"./text/model/Snowflake.simple",
"./text/model/CarOutsideRings.simple",
"./text/model/BoxInside.simple",
"./text/model/CarInsideRings.simple",
"./text/model/CandyCorn.simple",
"./text/model/CarTape.simple",
"./text/model/OpenBox.simple",
"./text/model/Snowflake.3ds",
"./text/model/EasterEgg.simple",
"./text/model/CarBackPanel.simple",
"./text/model/CandyCorn.3ds",
"./text/model/BoxLid.simple",
"./text/model/Car.simple"];

async function precache() {
  console.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAA");
  caches.open(cacheName).then((cache) => {
      console.log(cache, precachedResources);
      return cache.addAll(precachedResources);
    }
  )
}

self.addEventListener("install", (event) => {
  console.log("AAAAAAAAAAAAAAAAAAAAAAAAAAAAWhat");
  event.waitUntil(precache());
});

async function cacheFirstWithRefresh(request) {
  const fetchResponsePromise = fetch(request).then(async (networkResponse) => {
    if (networkResponse.ok) {
      const cache = await caches.open(cacheName);
      cache.put(request, networkResponse.clone());
    }
    return networkResponse;
  });
  console.log(await caches.match(request));
  return (await caches.match(request)) || (await fetchResponsePromise);
}

self.addEventListener("fetch", (event) => {  
  event.respondWith(cacheFirstWithRefresh(event.request));
});
